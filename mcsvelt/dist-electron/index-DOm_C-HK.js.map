{"version":3,"file":"index-DOm_C-HK.js","sources":["../node_modules/dargs/index.js","../node_modules/tinyspawn/src/index.js","../node_modules/is-unix/index.js","../node_modules/youtube-dl-exec/src/constants.js","../node_modules/youtube-dl-exec/src/index.js"],"sourcesContent":["'use strict';\n\nconst match = (array, value) =>\n\tarray.some(x => (x instanceof RegExp ? x.test(value) : x === value));\n\nconst dargs = (object, options) => {\n\tconst arguments_ = [];\n\tlet extraArguments = [];\n\tlet separatedArguments = [];\n\n\toptions = {\n\t\tuseEquals: true,\n\t\tshortFlag: true,\n\t\t...options\n\t};\n\n\tconst makeArguments = (key, value) => {\n\t\tconst prefix = options.shortFlag && key.length === 1 ? '-' : '--';\n\t\tconst theKey = (options.allowCamelCase ?\n\t\t\tkey :\n\t\t\tkey.replace(/[A-Z]/g, '-$&').toLowerCase());\n\n\t\tkey = prefix + theKey;\n\n\t\tif (options.useEquals) {\n\t\t\targuments_.push(key + (value ? `=${value}` : ''));\n\t\t} else {\n\t\t\targuments_.push(key);\n\n\t\t\tif (value) {\n\t\t\t\targuments_.push(value);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst makeAliasArg = (key, value) => {\n\t\targuments_.push(`-${key}`);\n\n\t\tif (value) {\n\t\t\targuments_.push(value);\n\t\t}\n\t};\n\n\tfor (let [key, value] of Object.entries(object)) {\n\t\tlet pushArguments = makeArguments;\n\n\t\tif (Array.isArray(options.excludes) && match(options.excludes, key)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (Array.isArray(options.includes) && !match(options.includes, key)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (typeof options.aliases === 'object' && options.aliases[key]) {\n\t\t\tkey = options.aliases[key];\n\t\t\tpushArguments = makeAliasArg;\n\t\t}\n\n\t\tif (key === '--') {\n\t\t\tif (!Array.isArray(value)) {\n\t\t\t\tthrow new TypeError(\n\t\t\t\t\t`Expected key \\`--\\` to be Array, got ${typeof value}`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tseparatedArguments = value;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key === '_') {\n\t\t\tif (!Array.isArray(value)) {\n\t\t\t\tthrow new TypeError(\n\t\t\t\t\t`Expected key \\`_\\` to be Array, got ${typeof value}`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\textraArguments = value;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (value === true) {\n\t\t\tpushArguments(key, '');\n\t\t}\n\n\t\tif (value === false && !options.ignoreFalse) {\n\t\t\tpushArguments(`no-${key}`);\n\t\t}\n\n\t\tif (typeof value === 'string') {\n\t\t\tpushArguments(key, value);\n\t\t}\n\n\t\tif (typeof value === 'number' && !Number.isNaN(value)) {\n\t\t\tpushArguments(key, String(value));\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (const arrayValue of value) {\n\t\t\t\tpushArguments(key, arrayValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (const argument of extraArguments) {\n\t\targuments_.push(String(argument));\n\t}\n\n\tif (separatedArguments.length > 0) {\n\t\targuments_.push('--');\n\t}\n\n\tfor (const argument of separatedArguments) {\n\t\targuments_.push(String(argument));\n\t}\n\n\treturn arguments_;\n};\n\nmodule.exports = dargs;\n","'use strict'\n\nconst { spawn } = require('child_process')\nconst { EOL } = require('os')\n\nconst EE_PROPS = Object.getOwnPropertyNames(require('events').EventEmitter.prototype)\n  .filter(name => !name.startsWith('_'))\n  .concat(['kill', 'ref', 'unref'])\n\nconst eos = (stream, listener, buffer = []) =>\n  stream[listener] ? stream[listener].on('data', data => buffer.push(data)) && buffer : buffer\n\nconst createChildProcessError = ({ cmd, cmdArgs, exitCode, stderr, childProcess }) => {\n  const command = `${cmd} ${cmdArgs.join(' ')}`\n  let message = `The command spawned as:${EOL}${EOL}`\n  message += `  ${command}${EOL}${EOL}`\n  message += `exited with \\`{ code: ${exitCode} }\\` and the following trace:${EOL}${EOL}`\n  message += String(stderr)\n    .split(EOL)\n    .map(line => `  ${line}`)\n    .join(EOL)\n  const error = new Error(message)\n  error.command = command\n  error.name = 'ChildProcessError'\n  Object.keys(childProcess).forEach(key => {\n    error[key] = childProcess[key]\n  })\n  return error\n}\n\nconst clean = str => str.trim().replace(/\\n$/, '')\n\nconst parse =\n  (buffer, { json } = {}) =>\n    (encoding, start, end) => {\n      const data = clean(Buffer.concat(buffer).toString(encoding, start, end))\n      return json ? JSON.parse(data) : data\n    }\n\nconst extend = defaults => (input, args, options) => {\n  if (!(args instanceof Array)) {\n    options = args\n    args = []\n  }\n  const [cmd, ...cmdArgs] = input.split(' ').concat(args).filter(Boolean)\n  let childProcess\n\n  const promise = new Promise((resolve, reject) => {\n    const opts = { ...defaults, ...options }\n    childProcess = spawn(cmd, cmdArgs, opts)\n    const stdout = eos(childProcess, 'stdout')\n    const stderr = eos(childProcess, 'stderr')\n\n    childProcess.on('error', reject).on('exit', exitCode => {\n      Object.defineProperty(childProcess, 'stdout', {\n        get: parse(stdout, opts)\n      })\n      Object.defineProperty(childProcess, 'stderr', { get: parse(stderr) })\n      return exitCode === 0\n        ? resolve(childProcess)\n        : reject(createChildProcessError({ cmd, cmdArgs, exitCode, stderr, childProcess }))\n    })\n  })\n\n  const subprocess = Object.assign(promise, childProcess)\n  if (childProcess) {\n    EE_PROPS.forEach(name => (subprocess[name] = childProcess[name].bind(childProcess)))\n  }\n  return subprocess\n}\n\nconst $ = extend()\n$.extend = extend\n$.json = $.extend({ json: true })\n\nmodule.exports = $\n","'use strict'\n\nmodule.exports = (platform = '') => {\n  platform = platform.toLowerCase()\n  return (\n    [\n      'aix',\n      'android',\n      'darwin',\n      'freebsd',\n      'linux',\n      'openbsd',\n      'sunos'\n    ].indexOf(platform) !== -1\n  )\n}\n","'use strict'\n\nconst isUnix = require('is-unix')\nconst path = require('path')\n\nconst PLATFORM_WIN = 'win32'\nconst PLATFORM_UNIX = 'unix'\n\nfunction get (key) {\n  if (!key) return undefined\n  return (\n    process.env[key] ??\n    process.env[`npm_config_${key.toLowerCase()}`] ??\n    process.env[`npm_config_${key.toUpperCase()}`]\n  )\n}\n\nconst YOUTUBE_DL_HOST =\n  get('YOUTUBE_DL_HOST') ??\n  'https://api.github.com/repos/yt-dlp/yt-dlp/releases/latest'\n\nconst YOUTUBE_DL_DIR =\n  get('YOUTUBE_DL_DIR') ?? path.join(__dirname, '..', 'bin')\n\nconst YOUTUBE_DL_PLATFORM =\n  get('YOUTUBE_DL_PLATFORM') ?? isUnix(process.platform)\n    ? PLATFORM_UNIX\n    : PLATFORM_WIN\n\nconst YOUTUBE_DL_FILENAME = get('YOUTUBE_DL_FILENAME') || 'yt-dlp'\n\nconst YOUTUBE_DL_FILE =\n  !YOUTUBE_DL_FILENAME.endsWith('.exe') && YOUTUBE_DL_PLATFORM === 'win32'\n    ? `${YOUTUBE_DL_FILENAME}.exe`\n    : YOUTUBE_DL_FILENAME\n\nconst YOUTUBE_DL_PATH = path.join(YOUTUBE_DL_DIR, YOUTUBE_DL_FILE)\n\nconst YOUTUBE_DL_SKIP_DOWNLOAD = get('YOUTUBE_DL_SKIP_DOWNLOAD')\n\nmodule.exports = {\n  YOUTUBE_DL_DIR,\n  YOUTUBE_DL_FILE,\n  YOUTUBE_DL_FILENAME,\n  YOUTUBE_DL_HOST,\n  YOUTUBE_DL_PATH,\n  YOUTUBE_DL_PLATFORM,\n  YOUTUBE_DL_SKIP_DOWNLOAD\n}\n","'use strict'\n\nconst dargs = require('dargs')\nconst $ = require('tinyspawn')\n\nconst constants = require('./constants')\n\nconst args = (flags = {}) =>\n  dargs(flags, { useEquals: false }).filter(Boolean)\n\nconst isJSON = (str = '') => str.startsWith('{')\n\nconst parse = ({ stdout, stderr, ...details }) => {\n  if (stdout !== '' && stdout !== 'null') return isJSON(stdout) ? JSON.parse(stdout) : stdout\n  throw Object.assign(new Error(stderr), { stderr, stdout }, details)\n}\n\nconst create = binaryPath => {\n  const fn = (...args) => fn.exec(...args).then(parse).catch(parse)\n  fn.exec = (url, flags, opts) => $(binaryPath, [url].concat(args(flags)), opts)\n  return fn\n}\n\nmodule.exports = create(constants.YOUTUBE_DL_PATH)\nmodule.exports.create = create\nmodule.exports.args = args\nmodule.exports.isJSON = isJSON\nmodule.exports.constants = constants\n"],"names":["isUnix","require$$0","path","require$$1","constants","require$$2","args","srcModule"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}